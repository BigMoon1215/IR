<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>수행평가 관리 시스템</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #calendar {
            display: inline-block;
            margin: 20px 0;
        }
        .day {
            width: 40px;
            height: 40px;
            display: inline-block;
            border: 1px solid #ddd;
            position: relative;
        }
        .dot {
            position: absolute;
            top: 5px;
            left: 5px;
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
        }
        #assignments {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h1>수행평가 관리 시스템</h1>
<div id="calendar"></div>
<button id="prev">이전</button>
<button id="next">다음</button>

<form id="assignment-form">
    <input type="date" id="date" required>
    <select id="subject" required>
        <option value="국어">국어</option>
        <option value="수학">수학</option>
        <option value="영어">영어</option>
        <option value="사회">사회</option>
        <option value="과학">과학</option>
        <option value="한국사">한국사</option>
        <option value="정보">정보</option>
        <option value="미술">미술</option>
        <option value="음악">음악</option>
        <option value="체육">체육</option>
    </select>
    <input type="text" id="content" placeholder="수행평가 내용" required>
    <button type="submit">추가</button>
</form>

<div id="assignments"></div>

<script>
    let currentMonth = new Date();
    const assignments = [];

    function renderCalendar() {
        const calendar = document.getElementById('calendar');
        calendar.innerHTML = '';
        currentMonth.setDate(1);
        const month = currentMonth.getMonth();
        const year = currentMonth.getFullYear();

        // 달력의 첫 번째 요일과 총 일수 계산
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        // 빈 칸 추가
        for (let i = 0; i < firstDay; i++) {
            calendar.innerHTML += '<div class="day"></div>';
        }

        // 날짜 추가
        for (let day = 1; day <= daysInMonth; day++) {
            const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const dayElement = `<div class="day" data-date="${dateString}">${day}</div>`;
            calendar.innerHTML += dayElement;
        }

        markAssignments();
        displayAssignments();
    }

    function markAssignments() {
        const days = document.querySelectorAll('.day');
        days.forEach(day => {
            const date = day.getAttribute('data-date');
            if (date) {
                const hasAssignment = assignments.some(a => a.date === date);
                if (hasAssignment) {
                    day.innerHTML += '<div class="dot"></div>';
                }
            }
        });
    }

    function displayAssignments() {
        const assignmentsDiv = document.getElementById('assignments');
        assignmentsDiv.innerHTML = '';
        assignments.forEach(a => {
            assignmentsDiv.innerHTML += `<div>${a.date} ${a.subject} - ${a.content}</div>`;
        });
    }

    document.getElementById('assignment-form').addEventListener('submit', (e) => {
        e.preventDefault();
        const date = document.getElementById('date').value;
        const subject = document.getElementById('subject').value;
        const content = document.getElementById('content').value;

        assignments.push({ date, subject, content });
        document.getElementById('assignment-form').reset();
        markAssignments();
        displayAssignments();
    });

    document.getElementById('prev').addEventListener('click', () => {
        currentMonth.setMonth(currentMonth.getMonth() - 1);
        renderCalendar();
    });

    document.getElementById('next').addEventListener('click', () => {
        currentMonth.setMonth(currentMonth.getMonth() + 1);
        renderCalendar();
    });

    renderCalendar();
</script>

</body>
</html>
